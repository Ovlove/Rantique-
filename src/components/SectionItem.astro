---
const { title, description, slug, tags = [] } = Astro.props;
---

<article class="section-item">
  <a class="section-link" href={`/posts/${slug}/`}>
    <h2>{title}</h2>
  </a>
  <p class="section-description">{description}</p>
  
  {tags.length > 0 && (
    <ul class="tags">
      {tags.map(tag => (
        <li class="tag" key={tag}>{tag}</li>
      ))}
    </ul>
  )}
</article>

<style>
  .section-item {
    border-bottom: 1px solid var(--border-color, #ddd);
    padding: 1.25rem 0;
    transition: background-color 0.3s ease;
  }

  .section-item:last-child {
    border-bottom: none;
  }

  .section-link {
    text-decoration: none;
    color: inherit;
    display: inline-block;
    width: 100%;
    transition: color 0.3s ease;
    cursor: pointer;
  }

  .section-link:hover h2,
  .section-link:focus h2 {
    color: var(--brand-purple, #7F5AF0);
    outline-offset: 4px;
    outline: 2px solid var(--brand-purple, #7F5AF0);
    text-decoration: underline;
  }

  .section-item h2 {
    margin: 0 0 0.4rem 0;
    font-size: 1.375rem;
    font-weight: 700;
    line-height: 1.2;
    transition: color 0.3s ease;
  }

  .section-description {
    margin: 0 0 0.75rem 0;
    color: var(--text-muted, #555);
    font-size: 1rem;
    line-height: 1.5;
    max-width: 40rem;
  }

  .tags {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .tag {
    background: var(--tag-bg, #eee);
    color: var(--tag-text, #333);
    padding: 0.3rem 0.6rem;
    border-radius: 9999px; /* pill shape */
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
    transition: background-color 0.3s ease, color 0.3s ease;
    user-select: none;
  }

  .tag:hover,
  .tag:focus {
    background-color: var(--brand-purple, #7F5AF0);
    color: white;
    outline: none;
    cursor: pointer;
    box-shadow: 0 0 8px var(--brand-purple, #7F5AF0);
  }

  .tag:focus-visible {
    outline: 2px solid var(--brand-purple, #7F5AF0);
    outline-offset: 2px;
  }

  /* Dark mode */
  @media (prefers-color-scheme: dark) {
    :root {
      --border-color: #444;
      --text-muted: #bbb;
      --tag-bg: #2c2c44;
      --tag-text: #ddd;
      --brand-purple: #9f7aea;
    }

    .section-item {
      border-color: var(--border-color);
    }

    .section-description {
      color: var(--text-muted);
    }

    .tag {
      background: var(--tag-bg);
      color: var(--tag-text);
      box-shadow: 0 1px 3px rgb(0 0 0 / 0.4);
    }

    .tag:hover,
    .tag:focus {
      background-color: var(--brand-purple);
      box-shadow: 0 0 12px var(--brand-purple);
    }

    .section-link:hover h2,
    .section-link:focus h2 {
      color: var(--brand-purple);
      outline-color: var(--brand-purple);
    }
  }

  /* Responsive tweaks */
  @media (max-width: 600px) {
    .section-item h2 {
      font-size: 1.125rem;
    }

    .section-description {
      max-width: 100%;
    }
  }
</style>
